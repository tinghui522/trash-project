{"version":3,"sources":["../../../src/commands/config/config.ts"],"names":["actionAsync","projectRoot","options","config","type","getPrebuildConfig","platforms","exp","introspect","modRequest","modResults","getConfig","skipSDKVersionRequirement","isPublicConfig","CommandError","Log","log","full","program","command","description","helpGroup","option","asyncActionProjectDir"],"mappings":";;;;;;;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAGA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;;;AAOA,eAAeA,WAAf,CAA2BC,WAA3B,EAAgDC,OAAhD,EAAkE;AAChE,MAAIC,MAAJ;;AAEA,MAAID,OAAO,CAACE,IAAR,KAAiB,UAArB,EAAiC;AAC/BD,IAAAA,MAAM,GAAG,oCAAcE,mCAAd,EAAiCJ,WAAjC,EAA8C;AACrDK,MAAAA,SAAS,EAAE,CAAC,KAAD,EAAQ,SAAR;AAD0C,KAA9C,CAAT;AAGD,GAJD,MAIO,IAAIJ,OAAO,CAACE,IAAR,KAAiB,YAArB,EAAmC;AACxCD,IAAAA,MAAM,GAAG,oCAAcE,mCAAd,EAAiCJ,WAAjC,EAA8C;AACrDK,MAAAA,SAAS,EAAE,CAAC,KAAD,EAAQ,SAAR;AAD0C,KAA9C,CAAT;AAIA,UAAM,qCAAiBH,MAAM,CAACI,GAAxB,EAA6B;AACjCN,MAAAA,WADiC;AAEjCO,MAAAA,UAAU,EAAE,IAFqB;AAGjCF,MAAAA,SAAS,EAAE,CAAC,KAAD,EAAQ,SAAR;AAHsB,KAA7B,CAAN,CALwC,CAUxC;;AACA,WAAOH,MAAM,CAACM,UAAd,CAXwC,CAYxC;;AACA,WAAON,MAAM,CAACO,UAAd;AACD,GAdM,MAcA,IAAIR,OAAO,CAACE,IAAR,KAAiB,QAArB,EAA+B;AACpCD,IAAAA,MAAM,GAAG,oCAAcQ,mBAAd,EAAyBV,WAAzB,EAAsC;AAC7CW,MAAAA,yBAAyB,EAAE,IADkB;AAE7CC,MAAAA,cAAc,EAAE;AAF6B,KAAtC,CAAT;AAID,GALM,MAKA,IAAIX,OAAO,CAACE,IAAZ,EAAkB;AACvB,UAAM,KAAIU,uBAAJ,EACH,0BAAyBZ,OAAO,CAACE,IAAK,uCADnC,CAAN;AAGD,GAJM,MAIA;AACLD,IAAAA,MAAM,GAAG,oCAAcQ,mBAAd,EAAyBV,WAAzB,EAAsC;AAC7CW,MAAAA,yBAAyB,EAAE;AADkB,KAAtC,CAAT;AAGD;;AAEDG,iBAAIC,GAAJ;;AACA,0CAAUd,OAAO,CAACe,IAAR,GAAed,MAAf,GAAwBA,MAAM,CAACI,GAAzC;;AACAQ,iBAAIC,GAAJ;AACD;;AAEc,kBAAUE,OAAV,EAA4B;AACzCA,EAAAA,OAAO,CACJC,OADH,CACW,eADX,EAEGC,WAFH,CAEe,yBAFf,EAGGC,SAHH,CAGa,MAHb,EAIGC,MAJH,CAIU,mBAJV,EAI+B,+DAJ/B,EAKGA,MALH,CAKU,QALV,EAKoB,iCALpB,EAMGC,qBANH,CAMyB,oCAAcvB,WAAd,CANzB;AAOD","sourcesContent":["import { getConfig, ProjectConfig } from '@expo/config';\nimport { compileModsAsync } from '@expo/config-plugins/build/plugins/mod-compiler';\nimport { getPrebuildConfig } from '@expo/prebuild-config';\nimport { Command } from 'commander';\n\nimport CommandError from '../../CommandError';\nimport Log from '../../log';\nimport { logConfig } from '../eject/configureProjectAsync';\nimport { profileMethod } from '../utils/profileMethod';\n\ntype Options = {\n  type?: string;\n  full: boolean;\n};\n\nasync function actionAsync(projectRoot: string, options: Options) {\n  let config: ProjectConfig;\n\n  if (options.type === 'prebuild') {\n    config = profileMethod(getPrebuildConfig)(projectRoot, {\n      platforms: ['ios', 'android'],\n    });\n  } else if (options.type === 'introspect') {\n    config = profileMethod(getPrebuildConfig)(projectRoot, {\n      platforms: ['ios', 'android'],\n    });\n\n    await compileModsAsync(config.exp, {\n      projectRoot,\n      introspect: true,\n      platforms: ['ios', 'android'],\n    });\n    // @ts-ignore\n    delete config.modRequest;\n    // @ts-ignore\n    delete config.modResults;\n  } else if (options.type === 'public') {\n    config = profileMethod(getConfig)(projectRoot, {\n      skipSDKVersionRequirement: true,\n      isPublicConfig: true,\n    });\n  } else if (options.type) {\n    throw new CommandError(\n      `Invalid option: --type ${options.type}. Valid options are: public, prebuild`\n    );\n  } else {\n    config = profileMethod(getConfig)(projectRoot, {\n      skipSDKVersionRequirement: true,\n    });\n  }\n\n  Log.log();\n  logConfig(options.full ? config : config.exp);\n  Log.log();\n}\n\nexport default function (program: Command) {\n  program\n    .command('config [path]')\n    .description('Show the project config')\n    .helpGroup('info')\n    .option('-t, --type <type>', 'Type of config to show. Options: public, prebuild, introspect')\n    .option('--full', 'Include all project config data')\n    .asyncActionProjectDir(profileMethod(actionAsync));\n}\n"],"file":"config.js"}